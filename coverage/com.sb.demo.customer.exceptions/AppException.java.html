<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AppException.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">customer</a> &gt; <a href="index.source.html" class="el_package">com.sb.demo.customer.exceptions</a> &gt; <span class="el_source">AppException.java</span></div><h1>AppException.java</h1><pre class="source lang-java linenums">package com.sb.demo.customer.exceptions;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.stereotype.Component;

import com.sb.demo.customer.utils.AppContextUtil;
import com.sb.demo.customer.utils.ErrorUtil;
import com.sb.demo.customer.utils.MessageService;

import java.util.Locale;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@Component
public class AppException extends Exception{
	private static final long serialVersionUID = 1L;

<span class="fc" id="L20">	private static final Logger logger = LoggerFactory.getLogger(AppException.class);</span>
	private String errorCode;
	private Object[] userMessageParams;
	private HttpStatus httpStatus; 
	private Exception sourceException;
	private String userMessage;
	
	@Autowired
	private MessageService messageService;
	@Autowired
	private ErrorUtil errorUtil;

	
<span class="nc" id="L33">	public AppException() {</span>
<span class="nc" id="L34">	}</span>


	/**
	 * Constructor for creating AppException where source exception userParams are null.
	 * @param errorCode
	 *            
	 */

<span class="nc" id="L43">	public AppException(String errorCode) {</span>
<span class="nc" id="L44">		this.errorCode = errorCode;</span>
<span class="nc" id="L45">		init();</span>
<span class="nc" id="L46">	}</span>

	/**
	 * Constructor for creating AppException from existing Source Exception.
	 * @param errorCode
	 *            the key to lookup up, such as 'no.resource.found'
	 */
<span class="fc" id="L53">	public AppException(Exception sourceException, String errorCode) {</span>
<span class="fc" id="L54">		this.setSourceException(sourceException);</span>
<span class="fc" id="L55">		this.errorCode = errorCode;</span>
<span class="fc" id="L56">		init();</span>
<span class="fc" id="L57">	}</span>


	
	public String getLocalizedMessage() {
<span class="pc bpc" id="L62" title="1 of 2 branches missed.">		if (userMessage!=null) {</span>
<span class="nc" id="L63">			return userMessage;</span>
<span class="pc bpc" id="L64" title="1 of 2 branches missed.">		} else if (messageService != null) {</span>
<span class="nc" id="L65">			return messageService.getMessage(errorCode, userMessageParams);</span>
		} else {
<span class="fc" id="L67">			logger.warn(&quot;MessageService is Null&quot;);</span>
<span class="fc" id="L68">			return &quot;&quot;;</span>
		}
	} 

	public String getErrorCode() {
<span class="fc" id="L73">		return errorCode;</span>
	}

	public void setErrorCode(String errorCode) {
<span class="nc" id="L77">		this.errorCode = errorCode;</span>
<span class="nc" id="L78">	}</span>

	public String getMessage() {
<span class="nc bnc" id="L81" title="All 2 branches missed.">		if (userMessage!=null) {</span>
<span class="nc" id="L82">			return userMessage;</span>
<span class="nc bnc" id="L83" title="All 2 branches missed.">		} else if (messageService != null) {</span>
<span class="nc" id="L84">			return messageService.getMessage(errorCode, userMessageParams, Locale.US);</span>
		} else {
<span class="nc" id="L86">			logger.warn(&quot;MessageService is Null&quot;);</span>
<span class="nc" id="L87">			return &quot;&quot;;</span>
		}
	} 

	public HttpStatus getHttpStatus() {
<span class="pc bpc" id="L92" title="1 of 2 branches missed.">		if (httpStatus!=null) {</span>
<span class="nc" id="L93">			return httpStatus;</span>
<span class="pc bpc" id="L94" title="1 of 2 branches missed.">		} else if (errorUtil!=null) {</span>
<span class="nc" id="L95">			return errorUtil.getHttpStatus(errorCode);</span>
		} else {
<span class="fc" id="L97">			logger.warn(&quot;ErrorUtil is null. Defaulting Error Response HttpStatus code to INTERNAL_SERVER_ERROR.&quot;);</span>
<span class="fc" id="L98">			return HttpStatus.INTERNAL_SERVER_ERROR;</span>
		}
	}

	public void setHttpStatus(HttpStatus httpStatus) {
<span class="nc" id="L103">		this.httpStatus = httpStatus;</span>
<span class="nc" id="L104">	}</span>
	
	private void init() {
<span class="fc" id="L107">		Object obj = AppContextUtil.bean(MessageService.class);</span>
<span class="pc bpc" id="L108" title="1 of 2 branches missed.">		if (obj != null) {</span>
<span class="nc" id="L109">			messageService = (MessageService) AppContextUtil.bean(MessageService.class);</span>
		}
<span class="fc" id="L111">		obj = AppContextUtil.bean(ErrorUtil.class);</span>
<span class="pc bpc" id="L112" title="1 of 2 branches missed.">		if (obj != null) {</span>
<span class="nc" id="L113">			errorUtil = (ErrorUtil) AppContextUtil.bean(ErrorUtil.class);</span>
		}
<span class="fc" id="L115">	}</span>

	public Object[] getUserMessageParams() {
<span class="fc" id="L118">		return userMessageParams;</span>
	}

	public void setUserMessageParams(Object[] userMessageParams) {
<span class="nc" id="L122">		this.userMessageParams = userMessageParams;</span>
<span class="nc" id="L123">	}</span>
	public Exception getSourceException() {
<span class="nc" id="L125">		return sourceException;</span>
	}

	public void setSourceException(Exception sourceException) {
<span class="fc" id="L129">		this.sourceException = sourceException;</span>
<span class="fc" id="L130">	}</span>
	public String getUserMessage() {
<span class="pc bpc" id="L132" title="1 of 2 branches missed.">		if (userMessage==null) {</span>
<span class="fc" id="L133">			return getLocalizedMessage();</span>
		}
<span class="nc" id="L135">		return userMessage;</span>
	}
	public void setUserMessage(String userMessage) {
<span class="nc" id="L138">		this.userMessage = userMessage;</span>
<span class="nc" id="L139">	}</span>
	
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span></div></body></html>